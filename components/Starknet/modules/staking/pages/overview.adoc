[id="staking_overview"]
= Staking Overview

Staking on Starknet is a pivotal component in enhancing the network's security and decentralization. Developed by StarkWare, this staking protocol introduces both direct staking and stake delegation, allowing users to earn rewards while supporting the network.

Staking on Starknet involves locking STRK tokens in the staking protocol, contributing to network security and performance. Users can either stake directly or delegate their tokens to others, with rewards based on their level of participation and contribution.

The key terms used in this document are:

* _Stake_: Locking STRK tokens into the staking protocol.
* _Delegate_: Assigning STRK tokens to a staker to participate indirectly.
* _Reward_: Earnings from participating in staking.

[NOTE]
====
STRK tokens never leave the Starknet protocol during these operations.
====


== Staking Protocol Details

=== Overview

The staking protocol features two main options:

* _Direct Staking_: Users can stake any amount of STRK, with a minimum threshold set at 20,000 STRK. Stakers must run full nodes and eventually handle additional responsibilities as the protocol evolves.
* _Stake Delegation_: Users can delegate their STRK to stakers without running their own nodes. Delegators share in the rewards earned by the stakers they choose.

Stakers and delegators can both unstake their funds, subject to network-defined latencies for security.

=== Staking Rewards

Rewards are distributed based on the amount staked and the reward-sharing constant stem:[R] set by the staker. The rewards are calculated using the following formulas:

[stem]
++++
\begin{align}
\text{Stakers: } & \; \left[\text{self_stake} + \text{total_stake_delegated} \times (1 - R)\right] \times \text{rewards_constant} \times \text{time_interval} \\
\text{Stake Delegators: } & \; \text{stake_delegated} \times R \times \text{rewards_constant} \times \text{time_interval}
\end{align}
++++

Here, stem:[\text{rewards_constant}] is determined by the minting curve, which adjusts rewards based on the total staked amount.


=== Minting Curve

The minting curve balances participation and inflation by adjusting rewards based on the total STRK locked in the protocol. It is defined by the formula:

[stem]
++++
M = \frac{C}{10} \times \sqrt{S}
++++

Where:

* stem:[S] is the staking rate as a percentage of the total token supply.
* stem:[M] is the annual minting rate as a percentage of the total token supply.
* stem:[C] is the maximum theoretical inflation percentage.

For the first stage, stem:[C] is proposed to be between 1.8% and 2.5%.

=== Latencies

* **Current Version**: Immediate entry and exit from the staking protocol. However, funds are subject to a 21-day security lockup after withdrawal.
* **Future Versions**: Introduction of epochs to determine entry/exit latencies and continued 21-day lockup after withdrawal.

[NOTE]
====
Stake Delegators can switch between stakers without waiting for the full lockup period, promoting a competitive delegation market.
====

=== Economic Parameters

The proposed economic parameters are:

* **Minimum STRK for Staking:** 20,000 STRK
* **Withdrawal Security Lockup:** 21 days
* **Minting Curve Yearly Inflation Cap (stem:[C]):** 1.8% - 2.5%
* **Reward-Sharing Parameter (stem:[R]):** Set by the staker (0 - 1)

These parameters are subject to adjustments based on protocol performance and community feedback.

== Additional Resources

* _Staking Developer's Reference_:
  * xref:function-reference.adoc#stake[`stake` function, `Stake` event]
  * xref:function-reference.adoc#unstake[`unstake` function]
  * xref:function-reference.adoc#initiate_unstake[`initiate_unstake` function]